# Upgrading v0.2 to v0.3

When upgrading from v0.2 to v0.3, the installation script simply needs to be run again. However, due to breaking changes, some manual adjustments are required for existing configurations and workloads.

## Configurations

`CompleteState`

* `currentState` has been renamed to `desiredState`

`State`

* New mandatory field `apiVersion` was added to avoid incompatibility issues.
* The boolean field `restart` has been supplemented with a `restartPolicy` enum.
* `configs` and `cronjobs` have been removed for now as they are not implemented yet.

`Workload`

* `accessRights` and `updateStrategy` have been removed for now as they are not implemented yet.

## API

Application using the control interface or communicating directly with the Ankaios server (custom CLIs) need to be adapted.
Application using the control interface or communicating directly with the Ankaios server (custom CLIs) need to be adapted.

A new `ToServer` message, `Request`, has been introduced.
Every `Request` to the server requires a `requestId` which is used by the server for the response message. Request IDs allow sending multiple parallel requests to the server.
The two messages `UpdateStateRequest` and `CompleteStateRequest` have been moved to the new `Request` message.

A new `FromServer` message, `Response`, has been introduced.
The `CompletState` message has been moved to the new `Reponse` message.
Additionally, the Ankaios server now responds to an `UpdateStateRequest` with an `UpdateStateSuccess` or `Error` message,
which are both of type `Response`.
