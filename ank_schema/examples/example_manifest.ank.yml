apiVersion: v1
workloads:
  # each key must be in r"^[a-zA-Z0-9_-]+$" and be at most 63 characters
  hello1:
    agent: ""
    runtime: podman
    runtimeConfig: |
      image: hello-world:latest
    restartPolicy: NEVER
  test_workload:
    # each key must be either in r"^[a-zA-Z0-9_-]*$" or be a variable reference like "{{variables.2.VAR_NAME}}"
    agent: '{{arrays_of.items.2.which.can.be.mappings.again.2}}'
    runtime: podman
    runtimeConfig: |
      image: alpine:latest
      commandArgs: [ "echo", "Hello Ankaios"]
    dependencies:
      hello1: ADD_COND_SUCCEEDED
    restartPolicy: ON_FAILURE
    controlInterfaceAccess:
      allowRules:
        - type: StateRule
          operation: Read
          filterMasks:
            # each item must not be empty and be composed of a wildcard "*" or chars in [a-zA-Z0-9_-] separated with points "."
            - "desiredState.workloads.*.agent"
        - type: LogRule
          workloadNames:
            # each item must be a valid workload name with at most one "*" wildcard in it and length of at most at most 64 characters (accounting the wildcard)
            - "some*workload"
            - "workload_prefix*"
            - "*workload_suffix"
            - "just_a_name"
    files:
      - mountPoint: /tmp/somefile.txt
        data: |
          some data
    configs:
      # each key and each value must be in r"^[a-zA-Z0-9_-]+$"
      my_config: mapping_of_objects
      arrays_of: arrays_of
    tags:
      owner: Ankaios team
configs:
  # each key (and sub key) must be in r"^[a-zA-Z0-9_-]+$" and be at most 63 characters
  can_be: simple_strings
  agents:
   - agent_A
   - agent_B
   - agent_C
  mapping_of_objects:
    with:
      arbitrary: depth
    can_be:
      simple: strings
  arrays_of:
    items:
    - some
    - of
    - which:
        can:
          be:
            mappings:
              again:
              - and
              - some
              - arrays

