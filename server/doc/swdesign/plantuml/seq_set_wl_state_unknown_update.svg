<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="493px" preserveAspectRatio="none" style="width:1020px;height:493px;" version="1.1" viewBox="0 0 1020 493" width="1020px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="471.5234" style="stroke: #D3D3D3; stroke-width: 1.0;" width="514" x="155" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="357" y="16.0669">Ankaios Server</text><rect fill="#EEEEEE" height="471.5234" style="stroke: #D3D3D3; stroke-width: 1.0;" width="146" x="691" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="706.5" y="16.0669">Ankaios Agents</text><rect fill="#FFFFFF" height="300.7266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="210" y="171.7969"/><rect fill="#FFFFFF" height="118.6641" style="stroke: #383838; stroke-width: 1.0;" width="10" x="406" y="353.8594"/><rect fill="#FFFFFF" height="329.8594" style="stroke: #383838; stroke-width: 1.0;" width="10" x="591.5" y="142.6641"/><rect fill="#FFFFFF" height="89.5313" style="stroke: #383838; stroke-width: 1.0;" width="10" x="796" y="382.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="215" x2="215" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="215" x2="215" y1="80.7266" y2="121.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="215" x2="215" y1="121.5313" y2="481.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="411" x2="411" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="411" x2="411" y1="80.7266" y2="121.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="411" x2="411" y1="121.5313" y2="481.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="596" x2="596" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="596" x2="596" y1="80.7266" y2="121.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="596" x2="596" y1="121.5313" y2="481.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="727" x2="727" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="727" x2="727" y1="80.7266" y2="121.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="727" x2="727" y1="121.5313" y2="481.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="801" x2="801" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="801" x2="801" y1="80.7266" y2="121.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="801" x2="801" y1="121.5313" y2="481.5234"/><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="112" x="159" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="168.5" y="43.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="166" y="59.4248">AnkaiosServer</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="214" x="304" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="364.5" y="43.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="200" x="311" y="59.4248">GRPCCommunicationsServer</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="137" x="528" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="93" x="550" y="43.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="535" y="59.4248">tonic gRPC server</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="64" x="695" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="702" y="59.4248">Agent1</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="64" x="769" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="776" y="59.4248">Agent2</text><rect fill="#FFFFFF" height="300.7266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="210" y="171.7969"/><rect fill="#FFFFFF" height="118.6641" style="stroke: #383838; stroke-width: 1.0;" width="10" x="406" y="353.8594"/><rect fill="#FFFFFF" height="329.8594" style="stroke: #383838; stroke-width: 1.0;" width="10" x="591.5" y="142.6641"/><rect fill="#FFFFFF" height="89.5313" style="stroke: #383838; stroke-width: 1.0;" width="10" x="796" y="382.9922"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="256" x="380" y="104.937">Two agents are connected to Ankiaos Server</text><line style="stroke: #383838; stroke-width: 1.0;" x1="601.5" x2="611.5" y1="142.6641" y2="138.6641"/><line style="stroke: #383838; stroke-width: 1.0;" x1="601.5" x2="611.5" y1="142.6641" y2="146.6641"/><line style="stroke: #383838; stroke-width: 1.0;" x1="601.5" x2="726" y1="142.6641" y2="142.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="618.5" y="137.5981">AgentGone</text><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="230" y1="171.7969" y2="167.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="230" y1="171.7969" y2="175.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="590.5" y1="171.7969" y2="171.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="237" y="166.731">AgentGone</text><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="262" y1="231.1953" y2="231.1953"/><line style="stroke: #383838; stroke-width: 1.0;" x1="262" x2="262" y1="231.1953" y2="244.1953"/><line style="stroke: #383838; stroke-width: 1.0;" x1="221" x2="262" y1="244.1953" y2="244.1953"/><polygon fill="#383838" points="231,240.1953,221,244.1953,231,248.1953" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="227" y="195.8638">set workload states to Lost</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="227" y="210.9966">in WorkloadStateDB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="56" x="227" y="226.1294">(Agent1)</text><path d="M8,257.1953 L8,327.1953 L205,327.1953 L205,267.1953 L195,257.1953 L8,257.1953 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M195,257.1953 L195,267.1953 L205,267.1953 L195,257.1953 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="14" y="274.2622">workloadStates:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="14" y="289.395">- workload: Workload 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="30" y="304.5278">node: Node 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="30" y="319.6606">executionState: Lost</text><line style="stroke: #383838; stroke-width: 1.0;" x1="404" x2="394" y1="353.8594" y2="349.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="404" x2="394" y1="353.8594" y2="357.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="220" x2="405" y1="353.8594" y2="353.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="227" y="348.7935">UpdateWorkloadState</text><line style="stroke: #383838; stroke-width: 1.0;" x1="794" x2="784" y1="382.9922" y2="378.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="794" x2="784" y1="382.9922" y2="386.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="416" x2="795" y1="382.9922" y2="382.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="423" y="377.9263">UpdateWorkloadState</text><path d="M811,395.9922 L811,465.9922 L1008,465.9922 L1008,405.9922 L998,395.9922 L811,395.9922 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M998,395.9922 L998,405.9922 L1008,405.9922 L998,395.9922 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="817" y="413.0591">workloadStates:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="817" y="428.1919">- workload: Workload 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="833" y="443.3247">node: Node 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="833" y="458.4575">executionState: Lost</text><!--MD5=[b76bf855802d945f8ad25fa9de1efb6c]
@startuml seq_set_wl_state_unknown_update
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box

box "Ankaios Agents"
participant "Agent1" as agent1
participant "Agent2" as agent2
end box

...Two agents are connected to Ankiaos Server...
agent1 ->> tonic_server ++- -: AgentGone
tonic_server ->> server ++- -: AgentGone
server -> server : set workload states to Lost\nin WorkloadStateDB\n(Agent1)
note left server
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note

server ->> grpc_server ++- -: UpdateWorkloadState
grpc_server ->> agent2 ++- -: UpdateWorkloadState
note right agent2
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note



@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>