<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1087px" preserveAspectRatio="none" style="width:979px;height:1087px;background:#FFFFFF;" version="1.1" viewBox="0 0 979 1087" width="979px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="1068.1016" style="stroke:#D3D3D3;stroke-width:0.5;" width="788" x="16" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="355" y="18.0669">Ankaios Server</text><rect fill="#EEEEEE" height="1068.1016" style="stroke:#D3D3D3;stroke-width:0.5;" width="121" x="826" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="833" y="18.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="794.1719" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="38" y="117.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="38" y1="117.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="48" y1="117.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="48" y1="117.8594" y2="117.8594"/><rect fill="#FFFFFF" height="95.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="38" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="38" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="48" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="48" y1="1048.1016" y2="1048.1016"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="159.0586"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="235.2578"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="1020.1016"/><rect fill="#FFFFFF" height="494.7813" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="274" y="417.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="274" y1="417.25" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="417.25" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="284" y1="417.25" y2="417.25"/><rect fill="#FFFFFF" height="30.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="274" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="274" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="284" y1="982.9688" y2="982.9688"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="279" y="472.8438"/><rect fill="#FFFFFF" height="166.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="279" y="671.9688"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="284" y="774.5"/><rect fill="#FFFFFF" height="602.6406" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="457" y="309.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="457" y1="309.3906" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="467" y1="309.3906" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="467" y1="309.3906" y2="309.3906"/><rect fill="#FFFFFF" height="95.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="457" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="457" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="467" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="467" y1="1048.1016" y2="1048.1016"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="585.2422"/><rect fill="#FFFFFF" height="47.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="838.6328"/><rect fill="#FFFFFF" height="287.6563" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="726.5" y="624.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="726.5" y1="624.375" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="736.5" y1="624.375" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="736.5" y1="624.375" y2="624.375"/><rect fill="#FFFFFF" height="30.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="726.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="726.5" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="736.5" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="736.5" y1="982.9688" y2="982.9688"/><rect fill="#FFFFFF" height="808.1719" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="881.5" y="103.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="881.5" y1="103.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="891.5" x2="891.5" y1="103.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="891.5" y1="103.8594" y2="103.8594"/><rect fill="#FFFFFF" height="118.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="881.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="881.5" y1="952.8359" y2="1071.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="891.5" x2="891.5" y1="952.8359" y2="1071.1016"/><rect fill="#FFFFFF" height="26.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="886.5" y="885.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="886.5" y1="885.8984" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="896.5" x2="896.5" y1="885.8984" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="896.5" y1="885.8984" y2="885.8984"/><rect fill="#FFFFFF" height="118.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="886.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="886.5" y1="952.8359" y2="1071.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="896.5" x2="896.5" y1="952.8359" y2="1071.1016"/><rect fill="none" height="540.2578" style="stroke:#000000;stroke-width:1.5;" width="953" x="10" y="522.8438"/><rect fill="none" height="405.8594" style="stroke:#000000;stroke-width:1.5;" width="740" x="213" y="546.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="72.7266" y2="912.0313"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="43" x2="43" y1="912.0313" y2="952.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="952.8359" y2="1080.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="279" x2="279" y1="424.9141" y2="912.0313"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="279" x2="279" y1="912.0313" y2="952.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="279" x2="279" y1="952.8359" y2="1080.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="462" x2="462" y1="317.0547" y2="912.0313"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="462" x2="462" y1="912.0313" y2="952.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="462" x2="462" y1="952.8359" y2="1080.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="731" x2="731" y1="632.0391" y2="912.0313"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="731" x2="731" y1="912.0313" y2="952.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="731" x2="731" y1="952.8359" y2="1080.1016"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="886" x2="886" y1="72.7266" y2="912.0313"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="886" x2="886" y1="912.0313" y2="952.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="886" x2="886" y1="952.8359" y2="1080.1016"/><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="46" x="20" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="27" y="61.4248">Main</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="830" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="837" y="61.4248">Ankaios Agent</text><rect fill="#FFFFFF" height="794.1719" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="38" y="117.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="38" y1="117.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="48" y1="117.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="48" y1="117.8594" y2="117.8594"/><rect fill="#FFFFFF" height="95.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="38" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="38" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="48" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="38" x2="48" y1="1048.1016" y2="1048.1016"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="159.0586"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="235.2578"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="43" y="1020.1016"/><rect fill="#FFFFFF" height="494.7813" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="274" y="417.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="274" y1="417.25" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="417.25" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="284" y1="417.25" y2="417.25"/><rect fill="#FFFFFF" height="30.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="274" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="274" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="284" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="274" x2="284" y1="982.9688" y2="982.9688"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="279" y="472.8438"/><rect fill="#FFFFFF" height="166.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="279" y="671.9688"/><rect fill="#FFFFFF" height="28" style="stroke:#181818;stroke-width:1.0;" width="10" x="284" y="774.5"/><rect fill="#FFFFFF" height="602.6406" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="457" y="309.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="457" y1="309.3906" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="467" y1="309.3906" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="467" y1="309.3906" y2="309.3906"/><rect fill="#FFFFFF" height="95.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="457" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="457" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="467" y1="952.8359" y2="1048.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="457" x2="467" y1="1048.1016" y2="1048.1016"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="585.2422"/><rect fill="#FFFFFF" height="47.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="462" y="838.6328"/><rect fill="#FFFFFF" height="287.6563" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="726.5" y="624.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="726.5" y1="624.375" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="736.5" y1="624.375" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="736.5" y1="624.375" y2="624.375"/><rect fill="#FFFFFF" height="30.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="726.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="726.5" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="736.5" x2="736.5" y1="952.8359" y2="982.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="726.5" x2="736.5" y1="982.9688" y2="982.9688"/><rect fill="#FFFFFF" height="808.1719" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="881.5" y="103.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="881.5" y1="103.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="891.5" x2="891.5" y1="103.8594" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="891.5" y1="103.8594" y2="103.8594"/><rect fill="#FFFFFF" height="118.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="881.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="881.5" x2="881.5" y1="952.8359" y2="1071.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="891.5" x2="891.5" y1="952.8359" y2="1071.1016"/><rect fill="#FFFFFF" height="26.1328" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="886.5" y="885.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="886.5" y1="885.8984" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="896.5" x2="896.5" y1="885.8984" y2="912.0313"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="896.5" y1="885.8984" y2="885.8984"/><rect fill="#FFFFFF" height="118.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="886.5" y="952.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="886.5" x2="886.5" y1="952.8359" y2="1071.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="896.5" x2="896.5" y1="952.8359" y2="1071.1016"/><polygon fill="#181818" points="902.5,99.8594,892.5,103.8594,902.5,107.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="896.5" x2="972" y1="103.8594" y2="103.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="908.5" y="98.7935">start</text><polygon fill="#181818" points="26,113.8594,36,117.8594,26,121.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="0" x2="32" y1="117.8594" y2="117.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="95" y1="151.0586" y2="151.0586"/><line style="stroke:#181818;stroke-width:1.0;" x1="95" x2="95" y1="151.0586" y2="164.0586"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="95" y1="164.0586" y2="164.0586"/><polygon fill="#181818" points="64,160.0586,54,164.0586,64,168.0586" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="60" y="145.9927">load startup config</text><path d="M191,130.8594 L191,170.8594 L399,170.8594 L399,140.8594 L389,130.8594 L191,130.8594 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M389,130.8594 L389,140.8594 L399,140.8594 L389,130.8594 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="197" y="147.9263">Empty state is loaded,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="197" y="163.0591">if the startup config is empty.</text><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="95" y1="227.2578" y2="227.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="95" x2="95" y1="227.2578" y2="240.2578"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="95" y1="240.2578" y2="240.2578"/><polygon fill="#181818" points="64,236.2578,54,240.2578,64,244.2578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="60" y="222.1919">create communication channels</text><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="343" y1="299.3906" y2="295.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="343" y1="299.3906" y2="303.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="354" y1="299.3906" y2="299.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="55" y="294.3247">start</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="355" y="278.2578"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="415.5" y="298.2529">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="362" y="314.5498">GRPCCommunicationsServer</text><path d="M380,340.8516 L380,380.8516 L543,380.8516 L543,350.8516 L533,340.8516 L380,340.8516 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M533,340.8516 L533,350.8516 L543,350.8516 L533,340.8516 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="386" y="357.9185">start listening for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="386" y="373.0513">execution commands</text><line style="stroke:#181818;stroke-width:1.0;" x1="221" x2="211" y1="407.25" y2="403.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="221" x2="211" y1="407.25" y2="411.25"/><line style="stroke:#181818;stroke-width:1.0;" x1="48" x2="222" y1="407.25" y2="407.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="55" y="402.1841">start with startup config</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="223" y="386.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="232.5" y="406.1123">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="230" y="422.4092">AnkaiosServer</text><line style="stroke:#181818;stroke-width:1.0;" x1="289" x2="331" y1="464.8438" y2="464.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="331" x2="331" y1="464.8438" y2="477.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="331" y1="477.8438" y2="477.8438"/><polygon fill="#181818" points="300,473.8438,290,477.8438,300,481.8438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="296" y="459.7778">validate startup config</text><path d="M10,522.8438 L74,522.8438 L74,529.9766 L64,539.9766 L10,539.9766 L10,522.8438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="540.2578" style="stroke:#000000;stroke-width:1.5;" width="953" x="10" y="522.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="535.9106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="135" x="89" y="535.0542">[startup config valid]</text><path d="M213,546.9766 L290,546.9766 L290,554.1094 L280,564.1094 L213,564.1094 L213,546.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="405.8594" style="stroke:#000000;stroke-width:1.5;" width="740" x="213" y="546.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="228" y="560.0435">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="305" y="559.187">[per agent]</text><line style="stroke:#181818;stroke-width:1.0;" x1="473" x2="483" y1="585.2422" y2="581.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="473" x2="483" y1="585.2422" y2="589.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="472" x2="880.5" y1="585.2422" y2="585.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="489" y="580.1763">agent hello (name)</text><line style="stroke:#181818;stroke-width:1.0;" x1="661" x2="651" y1="614.375" y2="610.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="661" x2="651" y1="614.375" y2="618.375"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="662" y1="614.375" y2="614.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="474" y="609.3091">spawn gRPC server thread</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="663" y="593.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="685" y="613.2373">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="670" y="629.5342">tonic gRPC server</text><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="300" y1="671.9688" y2="667.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="300" y1="671.9688" y2="675.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="289" x2="725.5" y1="671.9688" y2="671.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="306" y="666.9028">agent hello (name)</text><path d="M641,684.9688 L641,724.9688 L822,724.9688 L822,694.9688 L812,684.9688 L641,684.9688 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M812,684.9688 L812,694.9688 L822,694.9688 L812,684.9688 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="647" y="702.0356">start listening for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="647" y="717.1685">state change commands</text><line style="stroke:#181818;stroke-width:1.0;" x1="294" x2="336" y1="766.5" y2="766.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="336" x2="336" y1="766.5" y2="779.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="295" x2="336" y1="779.5" y2="779.5"/><polygon fill="#181818" points="305,775.5,295,779.5,305,783.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="301" y="746.3013">calculate commands to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="305" y="761.4341">the specific agent</text><line style="stroke:#181818;stroke-width:1.0;" x1="460" x2="450" y1="838.6328" y2="834.6328"/><line style="stroke:#181818;stroke-width:1.0;" x1="460" x2="450" y1="838.6328" y2="842.6328"/><line style="stroke:#181818;stroke-width:1.0;" x1="284" x2="461" y1="838.6328" y2="838.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="291" y="833.5669">send commands</text><line style="stroke:#181818;stroke-width:1.0;" x1="884.5" x2="874.5" y1="885.8984" y2="881.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="884.5" x2="874.5" y1="885.8984" y2="889.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="467" x2="885.5" y1="885.8984" y2="885.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="474" y="880.8325">forward commands</text><path d="M265,851.6328 L265,906.6328 L452,906.6328 L452,861.6328 L442,851.6328 L265,851.6328 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M442,851.6328 L442,861.6328 L452,861.6328 L442,851.6328 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="271" y="868.6997">the commands include</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="271" y="883.8325">new workloads and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="271" y="898.9653">workload execution states</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="273" x="328.25" y="936.2417">Agent starts workloads according to commands</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="963" y1="960.8359" y2="960.8359"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="59" y1="982.9688" y2="978.9688"/><line style="stroke:#181818;stroke-width:1.0;" x1="49" x2="59" y1="982.9688" y2="986.9688"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="48" x2="278" y1="982.9688" y2="982.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="65" y="977.9028">startup config error</text><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="95" y1="1012.1016" y2="1012.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="95" x2="95" y1="1012.1016" y2="1025.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="54" x2="95" y1="1025.1016" y2="1025.1016"/><polygon fill="#181818" points="64,1021.1016,54,1025.1016,64,1029.1016" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="60" y="1007.0356">Graceful shutdown</text><line style="stroke:#383838;stroke-width:2.0;" x1="453" x2="471" y1="1046.1016" y2="1064.1016"/><line style="stroke:#383838;stroke-width:2.0;" x1="453" x2="471" y1="1064.1016" y2="1046.1016"/><line style="stroke:#383838;stroke-width:2.0;" x1="270" x2="288" y1="1046.1016" y2="1064.1016"/><line style="stroke:#383838;stroke-width:2.0;" x1="270" x2="288" y1="1064.1016" y2="1046.1016"/><line style="stroke:#383838;stroke-width:2.0;" x1="34" x2="52" y1="1046.1016" y2="1064.1016"/><line style="stroke:#383838;stroke-width:2.0;" x1="34" x2="52" y1="1064.1016" y2="1046.1016"/><!--MD5=[573105e7ddceb4d050d62a9a45bac848]
@startuml seq_startup
!include ../../../../resources/doc/plantuml/clean.skin

box "Ankaios Server"
participant Main as main
participant "<<thread>>\nAnkaiosServer" as server

participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box

box "Ankaios Agent"
    participant "Ankaios Agent" as agent
end box

agent <- ++: start

-> main ++
main -> main ++- -: load startup config
note right: Empty state is loaded,\nif the startup config is empty.
main -> main ++- -: create communication channels
main ->> grpc_server **: start
activate grpc_server
note over grpc_server
    start listening for
    execution commands /'evil laughter'/
end note
main ->> server **: start with startup config
activate server
server -> server++- -: validate startup config
alt startup config valid

loop per agent
    agent ->> grpc_server ++: agent hello (name)

    grpc_server ->> tonic_server **: spawn gRPC server thread
    deactivate grpc_server
    activate tonic_server
    tonic_server ->> server++: agent hello (name)
    note over tonic_server
        start listening for
        state change commands
    end note

    server -> server ++- -: calculate commands to \n the specific agent

    server ->> grpc_server - -++: send commands
    grpc_server ->> agent - -++: forward commands
    note left
        the commands include
        new workloads and
        workload execution states
    end note
    ... Agent starts workloads according to commands ...
end

else
server - ->> main- -: startup config error
deactivate server
deactivate tonic_server

main -> main++- -: Graceful shutdown
destroy grpc_server
destroy server
destroy main

end
@enduml

@startuml seq_startup
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Server"
participant Main as main
participant "<<thread>>\nAnkaiosServer" as server

participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box

box "Ankaios Agent"
    participant "Ankaios Agent" as agent
end box

agent <- ++: start

-> main ++
main -> main ++- -: load startup config
note right: Empty state is loaded,\nif the startup config is empty.
main -> main ++- -: create communication channels
main ->> grpc_server **: start
activate grpc_server
note over grpc_server
    start listening for
    execution commands 
end note
main ->> server **: start with startup config
activate server
server -> server++- -: validate startup config
alt startup config valid

loop per agent
    agent ->> grpc_server ++: agent hello (name)

    grpc_server ->> tonic_server **: spawn gRPC server thread
    deactivate grpc_server
    activate tonic_server
    tonic_server ->> server++: agent hello (name)
    note over tonic_server
        start listening for
        state change commands
    end note

    server -> server ++- -: calculate commands to \n the specific agent

    server ->> grpc_server - -++: send commands
    grpc_server ->> agent - -++: forward commands
    note left
        the commands include
        new workloads and
        workload execution states
    end note
    ... Agent starts workloads according to commands ...
end

else
server - ->> main- -: startup config error
deactivate server
deactivate tonic_server

main -> main++- -: Graceful shutdown
destroy grpc_server
destroy server
destroy main

end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>