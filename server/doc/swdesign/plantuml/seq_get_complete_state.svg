<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="323px" preserveAspectRatio="none" style="width:943px;height:323px;background:#FFFFFF;" version="1.1" viewBox="0 0 943 323" width="943px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="304.6563" style="stroke:#D3D3D3;stroke-width:0.5;" width="731" x="11" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="321.5" y="18.0669">Ankaios Server</text><rect fill="#EEEEEE" height="304.6563" style="stroke:#D3D3D3;stroke-width:0.5;" width="121" x="816" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="819" y="18.0669">Ankaios Agents</text><rect fill="#FFFFFF" height="108.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="66" y="160.9922"/><rect fill="#FFFFFF" height="39.6992" style="stroke:#181818;stroke-width:1.0;" width="10" x="315" y="190.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="479" y="269.5234"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="131.8594"/><rect fill="#FFFFFF" height="187.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="871.5" y="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="71" x2="71" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="71" x2="71" y1="82.7266" y2="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="71" x2="71" y1="110.7266" y2="316.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="320" x2="320" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="320" x2="320" y1="82.7266" y2="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="320" x2="320" y1="110.7266" y2="316.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="484" x2="484" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="484" x2="484" y1="82.7266" y2="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="484" x2="484" y1="110.7266" y2="316.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="669" x2="669" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="669" x2="669" y1="82.7266" y2="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="669" x2="669" y1="110.7266" y2="316.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="876" x2="876" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="876" x2="876" y1="82.7266" y2="110.7266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="876" x2="876" y1="110.7266" y2="316.6563"/><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="15" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="24.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="22" y="61.4248">AnkaiosServer</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="94" x="273" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80" x="280" y="61.4248">ServerState</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="377" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="437.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="384" y="61.4248">GRPCCommunicationsServer</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="601" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="623" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="608" y="61.4248">tonic gRPC server</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="849" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="856" y="61.4248">Agent</text><rect fill="#FFFFFF" height="108.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="66" y="160.9922"/><rect fill="#FFFFFF" height="39.6992" style="stroke:#181818;stroke-width:1.0;" width="10" x="315" y="190.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="479" y="269.5234"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="664.5" y="131.8594"/><rect fill="#FFFFFF" height="187.9297" style="stroke:#181818;stroke-width:1.0;" width="10" x="871.5" y="110.7266"/><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="685.5" y1="131.8594" y2="127.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="675.5" x2="685.5" y1="131.8594" y2="135.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="674.5" x2="870.5" y1="131.8594" y2="131.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="691.5" y="126.7935">RequestCompleteState</text><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="160.9922" y2="156.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="160.9922" y2="164.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="668.5" y1="160.9922" y2="160.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="93" y="155.9263">RequestCompleteState</text><polygon fill="#181818" points="303,186.125,313,190.125,303,194.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="76" x2="309" y1="190.125" y2="190.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="83" y="185.0591">filter CompleteState by field_mask</text><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="229.8242" y2="225.8242"/><line style="stroke:#181818;stroke-width:1.0;" x1="77" x2="87" y1="229.8242" y2="233.8242"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="76" x2="319" y1="229.8242" y2="229.8242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="93" y="224.7583">CompleteState</text><path d="M330,203.125 L330,243.125 L572,243.125 L572,213.125 L562,203.125 L330,203.125 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M562,203.125 L562,213.125 L572,213.125 L562,203.125 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="336" y="220.1919">If field_mask is empty</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="336" y="235.3247">the full CompleteState is returned.</text><line style="stroke:#181818;stroke-width:1.0;" x1="477" x2="467" y1="269.5234" y2="265.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="477" x2="467" y1="269.5234" y2="273.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="71" x2="478" y1="269.5234" y2="269.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="78" y="264.4575">CompleteState</text><line style="stroke:#181818;stroke-width:1.0;" x1="874.5" x2="864.5" y1="298.6563" y2="294.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="874.5" x2="864.5" y1="298.6563" y2="302.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="875.5" y1="298.6563" y2="298.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="491" y="293.5903">CompleteState</text><!--MD5=[b0218cd4e75d765ba30021a64f61d97f]
@startuml seq_get_complete_state
!include ../../../../resources/doc/plantuml/clean.skin

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "ServerState" as server_state
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box


box "Ankaios Agents"
participant "Agent" as agent
end box

activate agent

...
agent ->> tonic_server++: RequestCompleteState
tonic_server ->> server- -++: RequestCompleteState
server -> server_state++: filter CompleteState by field_mask
server_state - ->> server- -: CompleteState
note right
If field_mask is empty
the full CompleteState is returned.
end note
server ->> grpc_server- -++: CompleteState
grpc_server ->> agent- -: CompleteState
deactivate agent



@enduml

@startuml seq_get_complete_state
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "ServerState" as server_state
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box


box "Ankaios Agents"
participant "Agent" as agent
end box

activate agent

...
agent ->> tonic_server++: RequestCompleteState
tonic_server ->> server- -++: RequestCompleteState
server -> server_state++: filter CompleteState by field_mask
server_state - ->> server- -: CompleteState
note right
If field_mask is empty
the full CompleteState is returned.
end note
server ->> grpc_server- -++: CompleteState
grpc_server ->> agent- -: CompleteState
deactivate agent



@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>