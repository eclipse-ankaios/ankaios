<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="610px" preserveAspectRatio="none" style="width:1012px;height:610px;background:#FFFFFF;" version="1.1" viewBox="0 0 1012 610" width="1012px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="591.5234" style="stroke:#D3D3D3;stroke-width:0.5;" width="514" x="152" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110" x="354" y="18.0669">Ankaios Server</text><rect fill="#EEEEEE" height="591.5234" style="stroke:#D3D3D3;stroke-width:0.5;" width="146" x="688" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115" x="703.5" y="18.0669">Ankaios Agents</text><rect fill="#FFFFFF" height="242.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="207" y="203.7969"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="403" y="415.8594"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="588.5" y="144.6641"/><rect fill="#FFFFFF" height="119.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="793" y="474.9922"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="212" x2="212" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="212" x2="212" y1="82.7266" y2="123.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="212" x2="212" y1="123.5313" y2="603.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="408" x2="408" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="408" x2="408" y1="82.7266" y2="123.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="408" x2="408" y1="123.5313" y2="603.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="593" x2="593" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="593" x2="593" y1="82.7266" y2="123.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="593" x2="593" y1="123.5313" y2="603.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="724" x2="724" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="724" x2="724" y1="82.7266" y2="123.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="724" x2="724" y1="123.5313" y2="603.5234"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="798" x2="798" y1="72.7266" y2="82.7266"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="798" x2="798" y1="82.7266" y2="123.5313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="798" x2="798" y1="123.5313" y2="603.5234"/><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="156" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="165.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="163" y="61.4248">AnkaiosServer</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="301" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="361.5" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="308" y="61.4248">GRPCCommunicationsServer</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="525" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="547" y="45.1279">&lt;&lt;thread&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="532" y="61.4248">tonic gRPC server</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="692" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="699" y="61.4248">Agent1</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="766" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="773" y="61.4248">Agent2</text><rect fill="#FFFFFF" height="242.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="207" y="203.7969"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="403" y="415.8594"/><rect fill="#FFFFFF" height="89.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="588.5" y="144.6641"/><rect fill="#FFFFFF" height="119.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="793" y="474.9922"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="256" x="377" y="106.937">Two agents are connected to Ankiaos Server</text><line style="stroke:#181818;stroke-width:1.0;" x1="599.5" x2="609.5" y1="144.6641" y2="140.6641"/><line style="stroke:#181818;stroke-width:1.0;" x1="599.5" x2="609.5" y1="144.6641" y2="148.6641"/><line style="stroke:#181818;stroke-width:1.0;" x1="598.5" x2="723" y1="144.6641" y2="144.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="615.5" y="139.5981">AgentGone</text><line style="stroke:#181818;stroke-width:1.0;" x1="218" x2="228" y1="203.7969" y2="199.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="218" x2="228" y1="203.7969" y2="207.7969"/><line style="stroke:#181818;stroke-width:1.0;" x1="217" x2="587.5" y1="203.7969" y2="203.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="234" y="198.731">AgentGone</text><line style="stroke:#181818;stroke-width:1.0;" x1="217" x2="259" y1="293.1953" y2="293.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="259" x2="259" y1="293.1953" y2="306.1953"/><line style="stroke:#181818;stroke-width:1.0;" x1="218" x2="259" y1="306.1953" y2="306.1953"/><polygon fill="#181818" points="228,302.1953,218,306.1953,228,310.1953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="224" y="257.8638">set workload states to Lost</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="224" y="272.9966">in WorkloadStateDB</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="224" y="288.1294">(Agent1)</text><path d="M5,319.1953 L5,389.1953 L202,389.1953 L202,329.1953 L192,319.1953 L5,319.1953 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M192,319.1953 L192,329.1953 L202,329.1953 L192,319.1953 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="11" y="336.2622">workloadStates:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="11" y="351.395">- workload: Workload 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="96" x="27" y="366.5278">node: Node 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="27" y="381.6606">executionState: Lost</text><line style="stroke:#181818;stroke-width:1.0;" x1="401" x2="391" y1="415.8594" y2="411.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="401" x2="391" y1="415.8594" y2="419.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="217" x2="402" y1="415.8594" y2="415.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="224" y="410.7935">UpdateWorkloadState</text><line style="stroke:#181818;stroke-width:1.0;" x1="791" x2="781" y1="474.9922" y2="470.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="791" x2="781" y1="474.9922" y2="478.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="413" x2="792" y1="474.9922" y2="474.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="420" y="469.9263">UpdateWorkloadState</text><path d="M808,517.9922 L808,587.9922 L1005,587.9922 L1005,527.9922 L995,517.9922 L808,517.9922 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><path d="M995,517.9922 L995,527.9922 L1005,527.9922 L995,517.9922 " fill="#FFFFFF" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="120" x="814" y="535.0591">workloadStates:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="814" y="550.1919">- workload: Workload 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="96" x="830" y="565.3247">node: Node 1</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="160" x="830" y="580.4575">executionState: Lost</text><!--MD5=[741eb82fc45a36acb82375f214ace1b4]
@startuml seq_set_wl_state_lost_update
!include ../../../../resources/doc/plantuml/clean.skin

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box

box "Ankaios Agents"
participant "Agent1" as agent1
participant "Agent2" as agent2
end box

...Two agents are connected to Ankiaos Server...
agent1 ->> tonic_server ++- -: AgentGone
tonic_server ->> server ++- -: AgentGone
server -> server : set workload states to Lost\nin WorkloadStateDB\n(Agent1)
note left server
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note

server ->> grpc_server ++- -: UpdateWorkloadState
grpc_server ->> agent2 ++- -: UpdateWorkloadState
note right agent2
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note



@enduml

@startuml seq_set_wl_state_lost_update
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Server"
participant "<<thread>>\nAnkaiosServer" as server
participant "<<thread>>\nGRPCCommunicationsServer" as grpc_server
participant "<<thread>>\ntonic gRPC server" as tonic_server
end box

box "Ankaios Agents"
participant "Agent1" as agent1
participant "Agent2" as agent2
end box

...Two agents are connected to Ankiaos Server...
agent1 ->> tonic_server ++- -: AgentGone
tonic_server ->> server ++- -: AgentGone
server -> server : set workload states to Lost\nin WorkloadStateDB\n(Agent1)
note left server
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note

server ->> grpc_server ++- -: UpdateWorkloadState
grpc_server ->> agent2 ++- -: UpdateWorkloadState
note right agent2
        ""workloadStates:""
        ""- workload: Workload 1""
        ""  node: Node 1""
        ""  executionState: Lost""
end note



@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>