<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="415px" preserveAspectRatio="none" style="width:892px;height:415px;" version="1.1" viewBox="0 0 892 415" width="892px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="393.9219" style="stroke: #D3D3D3; stroke-width: 1.0;" width="690" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="305.5" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="250.9297" style="stroke: #383838; stroke-width: 1.0;" width="10" x="204" y="143.9922"/><rect fill="#FFFFFF" height="45.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="209" y="349.7891"/><rect fill="#FFFFFF" height="285.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="398" y="109.8594"/><rect fill="#FFFFFF" height="221.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="403" y="173.125"/><rect fill="#FFFFFF" height="16" style="stroke: #383838; stroke-width: 1.0;" width="10" x="408" y="378.9219"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="592" y="205.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="592" y="275.5234"/><rect fill="#FFFFFF" height="149.6641" style="stroke: #000000; stroke-width: 2.0;" width="692" x="18" y="237.2578"/><rect fill="#FFFFFF" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="294" x="28" y="304.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="57" x2="57" y1="70.7266" y2="403.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="209" x2="209" y1="70.7266" y2="403.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="403" x2="403" y1="70.7266" y2="403.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="597" x2="597" y1="70.7266" y2="403.9219"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="25" y="59.4248">Workload</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="206" x="106" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="113" y="59.4248">WorkloadCommandChannel</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="162" x="322" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="329" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="494" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="501" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="524.5" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="250.9297" style="stroke: #383838; stroke-width: 1.0;" width="10" x="204" y="143.9922"/><rect fill="#FFFFFF" height="45.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="209" y="349.7891"/><rect fill="#FFFFFF" height="285.0625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="398" y="109.8594"/><rect fill="#FFFFFF" height="221.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="403" y="173.125"/><rect fill="#FFFFFF" height="16" style="stroke: #383838; stroke-width: 1.0;" width="10" x="408" y="378.9219"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="592" y="205.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="592" y="275.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="403" x2="450" y1="96.8594" y2="96.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="450" x2="450" y1="96.8594" y2="109.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="409" x2="450" y1="109.8594" y2="109.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="409" x2="419" y1="109.8594" y2="105.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="409" x2="419" y1="109.8594" y2="113.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="415" y="91.7935">listen for commands</text><line style="stroke: #383838; stroke-width: 1.0;" x1="202" x2="192" y1="143.9922" y2="139.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="202" x2="192" y1="143.9922" y2="147.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="203" y1="143.9922" y2="143.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="64" y="138.9263">update</text><line style="stroke: #383838; stroke-width: 1.0;" x1="401" x2="391" y1="173.125" y2="169.125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="401" x2="391" y1="173.125" y2="177.125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="214" x2="402" y1="173.125" y2="173.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="221" y="168.0591">update</text><line style="stroke: #383838; stroke-width: 1.0;" x1="590" x2="580" y1="205.2578" y2="201.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="590" x2="580" y1="205.2578" y2="209.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="591" y1="205.2578" y2="205.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="420" y="200.1919">delete</text><path d="M607,186.125 L607,211.125 L880,211.125 L880,196.125 L870,186.125 L607,186.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M870,186.125 L870,196.125 L880,196.125 L870,186.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="613" y="203.1919">see delete digram for details on update</text><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="423" y1="222.2578" y2="218.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="423" y1="222.2578" y2="226.2578"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="413" x2="596" y1="222.2578" y2="222.2578"/><path d="M18,237.2578 L95,237.2578 L95,244.2578 L85,254.2578 L18,254.2578 L18,237.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="149.6641" style="stroke: #000000; stroke-width: 2.0;" width="692" x="18" y="237.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="33" y="250.3247">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="110" y="249.4683">[restart_counter &lt; limit]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="590" x2="580" y1="275.5234" y2="271.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="590" x2="580" y1="275.5234" y2="279.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="591" y1="275.5234" y2="275.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="420" y="270.4575">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="423" y1="289.5234" y2="285.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="413" x2="423" y1="289.5234" y2="293.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="413" x2="596" y1="289.5234" y2="289.5234"/><path d="M28,304.5234 L116,304.5234 L116,311.5234 L106,321.5234 L28,321.5234 L28,304.5234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.1328" style="stroke: #000000; stroke-width: 2.0;" width="294" x="28" y="304.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="43" y="317.5903">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="131" y="316.7339">[create workload successful]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="219" x2="229" y1="349.7891" y2="345.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="219" x2="229" y1="349.7891" y2="353.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="219" x2="402" y1="349.7891" y2="349.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="236" y="344.7231">restart</text><line style="stroke: #383838; stroke-width: 1.0;" x1="406" x2="396" y1="378.9219" y2="374.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="406" x2="396" y1="378.9219" y2="382.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="219" x2="407" y1="378.9219" y2="378.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="226" y="373.856">restart</text><!--MD5=[4479cb99927e2ff38c113330241adcdc]
@startuml seq_restart_workload_on_update_with_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "Workload" as workload
    participant "WorkloadCommandChannel" as workload_command
    participant "WorkloadControlLoop" as workload_control_loop

    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

workload_control_loop ->> workload_control_loop ++: listen for commands

workload ->> workload_command ++: update
workload_command ->> workload_control_loop ++: update
workload_control_loop ->> runtime ++: delete
note right
    see delete digram for details on update
endnote
runtime - ->> workload_control_loop- -

loop restart_counter < limit
    workload_control_loop ->> runtime ++: create workload
    runtime - ->> workload_control_loop- -

    break create workload successful
    end

    workload_control_loop ->> workload_command ++: restart
    workload_command ->> workload_control_loop ++: restart
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
