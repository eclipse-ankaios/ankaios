<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="473px" preserveAspectRatio="none" style="width:909px;height:473px;" version="1.1" viewBox="0 0 909 473" width="909px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="451.0547" style="stroke: #D3D3D3; stroke-width: 1.0;" width="707.5" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="314.25" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="385.9219"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="415.5" y="351.7891"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="609.5" y="206.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="609.5" y="252.3906"/><rect fill="#FFFFFF" height="133.5313" style="stroke: #000000; stroke-width: 2.0;" width="431" x="110.5" y="281.3906"/><rect fill="#FFFFFF" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="411" x="120.5" y="305.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="57" x2="57" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="229.5" x2="229.5" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="420.5" x2="420.5" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="614.5" x2="614.5" y1="70.7266" y2="461.0547"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="25" y="59.4248">Workload</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="199" x="130.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="185" x="137.5" y="59.4248">WorkloadCommandSender</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="162" x="339.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="382" y="43.1279">&lt;&lt;task&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="346.5" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="511.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="518.5" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="542" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="385.9219"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="415.5" y="351.7891"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="609.5" y="206.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="609.5" y="252.3906"/><polygon fill="#383838" points="241,97.8594,231,101.8594,241,105.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="235" x2="419.5" y1="101.8594" y2="101.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="247" y="96.7935">wait for command</text><polygon fill="#383838" points="213,126.9922,223,130.9922,213,134.9922" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="219" y1="130.9922" y2="130.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="64" y="125.9263">send update command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="67" y1="144.9922" y2="140.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="67" y1="144.9922" y2="148.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="57" x2="224" y1="144.9922" y2="144.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="418.5" x2="408.5" y1="174.125" y2="170.125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="418.5" x2="408.5" y1="174.125" y2="178.125"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="230" x2="419.5" y1="174.125" y2="174.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="237" y="169.0591">receive update</text><polygon fill="#383838" points="597.5,202.2578,607.5,206.2578,597.5,210.2578" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="603.5" y1="206.2578" y2="206.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="427.5" y="201.1919">delete</text><path d="M624,187.125 L624,212.125 L897,212.125 L897,197.125 L887,187.125 L624,187.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M887,187.125 L887,197.125 L897,197.125 L887,187.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="630" y="204.1919">see delete digram for details on update</text><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="430.5" y1="223.2578" y2="219.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="430.5" y1="223.2578" y2="227.2578"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="420.5" x2="613.5" y1="223.2578" y2="223.2578"/><polygon fill="#383838" points="597.5,248.3906,607.5,252.3906,597.5,256.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="603.5" y1="252.3906" y2="252.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="427.5" y="247.3247">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="430.5" y1="266.3906" y2="262.3906"/><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="430.5" y1="266.3906" y2="270.3906"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="420.5" x2="613.5" y1="266.3906" y2="266.3906"/><path d="M110.5,281.3906 L180.5,281.3906 L180.5,288.3906 L170.5,298.3906 L110.5,298.3906 L110.5,281.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="133.5313" style="stroke: #000000; stroke-width: 2.0;" width="431" x="110.5" y="281.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="125.5" y="294.4575">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="195.5" y="293.6011">[create workload fails]</text><path d="M120.5,305.5234 L190.5,305.5234 L190.5,312.5234 L180.5,322.5234 L120.5,322.5234 L120.5,305.5234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="411" x="120.5" y="305.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="135.5" y="318.5903">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="205.5" y="317.7339">[restart_counter &lt; limit]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="420.5" x2="467.5" y1="338.7891" y2="338.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="467.5" x2="467.5" y1="338.7891" y2="351.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="426.5" x2="467.5" y1="351.7891" y2="351.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="426.5" x2="436.5" y1="351.7891" y2="347.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="426.5" x2="436.5" y1="351.7891" y2="355.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="432.5" y="333.7231">spawn restart</text><polygon fill="#383838" points="246,381.9219,236,385.9219,246,389.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="240" x2="414.5" y1="385.9219" y2="385.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="252" y="380.856">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="413.5" x2="403.5" y1="399.9219" y2="395.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="413.5" x2="403.5" y1="399.9219" y2="403.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="230" x2="414.5" y1="399.9219" y2="399.9219"/><polygon fill="#383838" points="241,439.0547,231,443.0547,241,447.0547" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="235" x2="419.5" y1="443.0547" y2="443.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="247" y="437.9888">wait for command</text><!--MD5=[d1f0e1f16a158960280555153c7ff723]
@startuml seq_restart_workload_on_update_with_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "Workload" as workload
    participant "WorkloadCommandSender" as workload_command
    participant "<<task>>\nWorkloadControlLoop" as workload_control_loop

    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

workload_control_loop -> workload_command: wait for command

workload -> workload_command ++: send update command
workload_command - ->> workload
workload_command - ->> workload_control_loop - -++: receive update
workload_control_loop -> runtime ++: delete
note right
    see delete digram for details on update
endnote
runtime - ->> workload_control_loop- -
workload_control_loop -> runtime ++: create workload
runtime - ->> workload_control_loop- -
opt create workload fails
    opt restart_counter < limit
        workload_control_loop ->> workload_control_loop ++: spawn restart
        workload_control_loop -> workload_command ++: send restart command
        workload_command - ->> workload_control_loop- -
    end
end
workload_control_loop -> workload_command - -: wait for command
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>