<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="473px" preserveAspectRatio="none" style="width:913px;height:473px;" version="1.1" viewBox="0 0 913 473" width="913px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="451.0547" style="stroke: #D3D3D3; stroke-width: 1.0;" width="711" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="316" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="385.9219"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="419" y="351.7891"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="613" y="206.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="613" y="276.5234"/><rect fill="#FFFFFF" height="176.6641" style="stroke: #000000; stroke-width: 2.0;" width="624" x="107" y="238.2578"/><rect fill="#FFFFFF" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="418" x="117" y="305.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="57" x2="57" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="230" x2="230" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="424" x2="424" y1="70.7266" y2="461.0547"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="618" x2="618" y1="70.7266" y2="461.0547"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="25" y="59.4248">Workload</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="206" x="127" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="134" y="59.4248">WorkloadCommandChannel</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="162" x="343" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="385.5" y="43.1279">&lt;&lt;task&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="350" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="515" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="522" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="545.5" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="225" y="385.9219"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="419" y="351.7891"/><rect fill="#FFFFFF" height="17" style="stroke: #383838; stroke-width: 1.0;" width="10" x="613" y="206.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="613" y="276.5234"/><polygon fill="#383838" points="241,97.8594,231,101.8594,241,105.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="235" x2="423" y1="101.8594" y2="101.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="247" y="96.7935">wait for command</text><polygon fill="#383838" points="213,126.9922,223,130.9922,213,134.9922" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="219" y1="130.9922" y2="130.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="64" y="125.9263">send update command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="67" y1="144.9922" y2="140.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="57" x2="67" y1="144.9922" y2="148.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="57" x2="224" y1="144.9922" y2="144.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="412" y1="174.125" y2="170.125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="412" y1="174.125" y2="178.125"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="230" x2="423" y1="174.125" y2="174.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="237" y="169.0591">receive update</text><polygon fill="#383838" points="601,202.2578,611,206.2578,601,210.2578" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="607" y1="206.2578" y2="206.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="431" y="201.1919">delete</text><path d="M628,187.125 L628,212.125 L901,212.125 L901,197.125 L891,187.125 L628,187.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M891,187.125 L891,197.125 L901,197.125 L891,187.125 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="634" y="204.1919">see delete digram for details on update</text><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="434" y1="223.2578" y2="219.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="434" y1="223.2578" y2="227.2578"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="424" x2="617" y1="223.2578" y2="223.2578"/><path d="M107,238.2578 L177,238.2578 L177,245.2578 L167,255.2578 L107,255.2578 L107,238.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="176.6641" style="stroke: #000000; stroke-width: 2.0;" width="624" x="107" y="238.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="122" y="251.3247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="192" y="250.4683">[restart_counter &lt; limit]</text><polygon fill="#383838" points="601,272.5234,611,276.5234,601,280.5234" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="607" y1="276.5234" y2="276.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="431" y="271.4575">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="434" y1="290.5234" y2="286.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="434" y1="290.5234" y2="294.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="424" x2="617" y1="290.5234" y2="290.5234"/><path d="M117,305.5234 L187,305.5234 L187,312.5234 L177,322.5234 L117,322.5234 L117,305.5234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="418" x="117" y="305.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="132" y="318.5903">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="202" y="317.7339">[create workload fails]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="424" x2="471" y1="338.7891" y2="338.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="471" x2="471" y1="338.7891" y2="351.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="430" x2="471" y1="351.7891" y2="351.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="430" x2="440" y1="351.7891" y2="347.7891"/><line style="stroke: #383838; stroke-width: 1.0;" x1="430" x2="440" y1="351.7891" y2="355.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="436" y="333.7231">spawn restart</text><polygon fill="#383838" points="246,381.9219,236,385.9219,246,389.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="240" x2="418" y1="385.9219" y2="385.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="252" y="380.856">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="417" x2="407" y1="399.9219" y2="395.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="417" x2="407" y1="399.9219" y2="403.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="230" x2="418" y1="399.9219" y2="399.9219"/><polygon fill="#383838" points="241,439.0547,231,443.0547,241,447.0547" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="235" x2="423" y1="443.0547" y2="443.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="247" y="437.9888">wait for command</text><!--MD5=[778e39b00f4c0d80cd5bf0730d78f2d5]
@startuml seq_restart_workload_on_update_with_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "Workload" as workload
    participant "WorkloadCommandChannel" as workload_command
    participant "<<task>>\nWorkloadControlLoop" as workload_control_loop

    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

workload_control_loop -> workload_command: wait for command

workload -> workload_command ++: send update command
workload_command - ->> workload
workload_command - ->> workload_control_loop - -++: receive update
workload_control_loop -> runtime ++: delete
note right
    see delete digram for details on update
endnote
runtime - ->> workload_control_loop- -

opt restart_counter < limit
    workload_control_loop -> runtime ++: create workload
    runtime - ->> workload_control_loop- -

    opt create workload fails
        workload_control_loop ->> workload_control_loop ++: spawn restart
        workload_control_loop -> workload_command ++: send restart command
        workload_command - ->> workload_control_loop- -
    end
end
workload_control_loop -> workload_command - -: wait for command
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>