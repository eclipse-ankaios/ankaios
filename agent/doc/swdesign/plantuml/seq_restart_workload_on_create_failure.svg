<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="657px" preserveAspectRatio="none" style="width:945px;height:657px;" version="1.1" viewBox="0 0 945 657" width="945px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="635.8516" style="stroke: #D3D3D3; stroke-width: 1.0;" width="904.5" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="412.75" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="547.125" style="stroke: #383838; stroke-width: 1.0;" width="10" x="74" y="80.7266"/><rect fill="#FFFFFF" height="534.9922" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="101.8594"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="352.9219"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="563.7188"/><rect fill="#FFFFFF" height="134.5313" style="stroke: #383838; stroke-width: 1.0;" width="10" x="612.5" y="232.3906"/><rect fill="#FFFFFF" height="98.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="612.5" y="529.5859"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="806.5" y="261.5234"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="806.5" y="454.3203"/><rect fill="#FFFFFF" height="309.1953" style="stroke: #000000; stroke-width: 2.0;" width="644" x="290.5" y="290.5234"/><rect fill="#FFFFFF" height="278.0625" style="stroke: #000000; stroke-width: 2.0;" width="624" x="300.5" y="314.6563"/><rect fill="#FFFFFF" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="418" x="310.5" y="483.3203"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="70.7266" y2="645.8516"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="252.5" x2="252.5" y1="70.7266" y2="645.8516"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="423.5" x2="423.5" y1="70.7266" y2="645.8516"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="617.5" x2="617.5" y1="70.7266" y2="645.8516"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="811.5" x2="811.5" y1="70.7266" y2="645.8516"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="122" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="25" y="59.4248">RuntimeFacade</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="115" x="195.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="214.5" y="43.1279">&lt;&lt;task&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="202.5" y="59.4248">Workload Task</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="206" x="320.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="327.5" y="59.4248">WorkloadCommandChannel</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="162" x="536.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="543.5" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="708.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="715.5" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="739" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="547.125" style="stroke: #383838; stroke-width: 1.0;" width="10" x="74" y="80.7266"/><rect fill="#FFFFFF" height="534.9922" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="101.8594"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="130.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="352.9219"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="418.5" y="563.7188"/><rect fill="#FFFFFF" height="134.5313" style="stroke: #383838; stroke-width: 1.0;" width="10" x="612.5" y="232.3906"/><rect fill="#FFFFFF" height="98.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="612.5" y="529.5859"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="806.5" y="261.5234"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="806.5" y="454.3203"/><line style="stroke: #383838; stroke-width: 1.0;" x1="246" x2="236" y1="101.8594" y2="97.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="246" x2="236" y1="101.8594" y2="105.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="84" x2="247" y1="101.8594" y2="101.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="91" y="96.7935">spawn create workload</text><polygon fill="#383838" points="406.5,126.9922,416.5,130.9922,406.5,134.9922" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="258" x2="412.5" y1="130.9922" y2="130.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="265" y="125.9263">send create</text><line style="stroke: #383838; stroke-width: 1.0;" x1="258" x2="268" y1="144.9922" y2="140.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="258" x2="268" y1="144.9922" y2="148.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="258" x2="422.5" y1="144.9922" y2="144.9922"/><polygon fill="#383838" points="605.5,170.125,615.5,174.125,605.5,178.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="258" x2="611.5" y1="174.125" y2="174.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="265" y="169.0591">run</text><polygon fill="#383838" points="434.5,199.2578,424.5,203.2578,434.5,207.2578" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="428.5" x2="616.5" y1="203.2578" y2="203.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="440.5" y="198.1919">wait for command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="610.5" x2="600.5" y1="232.3906" y2="228.3906"/><line style="stroke: #383838; stroke-width: 1.0;" x1="610.5" x2="600.5" y1="232.3906" y2="236.3906"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="611.5" y1="232.3906" y2="232.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="430.5" y="227.3247">receive create</text><polygon fill="#383838" points="794.5,257.5234,804.5,261.5234,794.5,265.5234" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="622.5" x2="800.5" y1="261.5234" y2="261.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="629.5" y="256.4575">create</text><line style="stroke: #383838; stroke-width: 1.0;" x1="622.5" x2="632.5" y1="275.5234" y2="271.5234"/><line style="stroke: #383838; stroke-width: 1.0;" x1="622.5" x2="632.5" y1="275.5234" y2="279.5234"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="622.5" x2="810.5" y1="275.5234" y2="275.5234"/><path d="M290.5,290.5234 L360.5,290.5234 L360.5,297.5234 L350.5,307.5234 L290.5,307.5234 L290.5,290.5234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="309.1953" style="stroke: #000000; stroke-width: 2.0;" width="644" x="290.5" y="290.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="305.5" y="303.5903">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="375.5" y="302.7339">[create workload fails]</text><path d="M300.5,314.6563 L370.5,314.6563 L370.5,321.6563 L360.5,331.6563 L300.5,331.6563 L300.5,314.6563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="278.0625" style="stroke: #000000; stroke-width: 2.0;" width="624" x="300.5" y="314.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="315.5" y="327.7231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="385.5" y="326.8667">[restart_counter &lt; limit]</text><polygon fill="#383838" points="439.5,348.9219,429.5,352.9219,439.5,356.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="433.5" x2="611.5" y1="352.9219" y2="352.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="445.5" y="347.856">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="615.5" x2="605.5" y1="366.9219" y2="362.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="615.5" x2="605.5" y1="366.9219" y2="370.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="616.5" y1="366.9219" y2="366.9219"/><polygon fill="#383838" points="434.5,392.0547,424.5,396.0547,434.5,400.0547" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="428.5" x2="616.5" y1="396.0547" y2="396.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="440.5" y="390.9888">wait for command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="615.5" x2="605.5" y1="425.1875" y2="421.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="615.5" x2="605.5" y1="425.1875" y2="429.1875"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="616.5" y1="425.1875" y2="425.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="430.5" y="420.1216">restart command</text><polygon fill="#383838" points="794.5,450.3203,804.5,454.3203,794.5,458.3203" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="617.5" x2="800.5" y1="454.3203" y2="454.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="624.5" y="449.2544">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="617.5" x2="627.5" y1="468.3203" y2="464.3203"/><line style="stroke: #383838; stroke-width: 1.0;" x1="617.5" x2="627.5" y1="468.3203" y2="472.3203"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="617.5" x2="810.5" y1="468.3203" y2="468.3203"/><path d="M310.5,483.3203 L380.5,483.3203 L380.5,490.3203 L370.5,500.3203 L310.5,500.3203 L310.5,483.3203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="418" x="310.5" y="483.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="325.5" y="496.3872">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="395.5" y="495.5308">[create workload fails]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="617.5" x2="664.5" y1="516.5859" y2="516.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="664.5" x2="664.5" y1="516.5859" y2="529.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="623.5" x2="664.5" y1="529.5859" y2="529.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="623.5" x2="633.5" y1="529.5859" y2="525.5859"/><line style="stroke: #383838; stroke-width: 1.0;" x1="623.5" x2="633.5" y1="529.5859" y2="533.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="629.5" y="511.52">spawn restart</text><polygon fill="#383838" points="439.5,559.7188,429.5,563.7188,439.5,567.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="433.5" x2="611.5" y1="563.7188" y2="563.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="445.5" y="558.6528">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="610.5" x2="600.5" y1="577.7188" y2="573.7188"/><line style="stroke: #383838; stroke-width: 1.0;" x1="610.5" x2="600.5" y1="577.7188" y2="581.7188"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="423.5" x2="611.5" y1="577.7188" y2="577.7188"/><polygon fill="#383838" points="434.5,623.8516,424.5,627.8516,434.5,631.8516" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="428.5" x2="616.5" y1="627.8516" y2="627.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="440.5" y="622.7856">wait for command</text><!--MD5=[605c9b35d06a621292c23c927f68fc9a]
@startuml seq_restart_workload_on_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "RuntimeFacade" as runtime_facade
    participant "<<task>>\nWorkload Task" as create_workload_task
    participant "WorkloadCommandChannel" as workload_command
    participant "WorkloadControlLoop" as workload_control_loop
    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

activate runtime_facade
runtime_facade ->> create_workload_task ++: spawn create workload
create_workload_task -> workload_command ++: send create
workload_command - ->> create_workload_task- -
create_workload_task -> workload_control_loop : run
workload_control_loop -> workload_command: wait for command
workload_command - ->> workload_control_loop ++: receive create
workload_control_loop -> runtime ++: create
runtime - ->> workload_control_loop- -
opt create workload fails
    opt restart_counter < limit
    workload_control_loop -> workload_command ++: send restart command
    workload_command - ->> workload_control_loop- -
    deactivate workload_control_loop
    workload_control_loop -> workload_command : wait for command
    workload_command - ->> workload_control_loop - -++: restart command
        workload_control_loop -> runtime ++: create workload
        runtime - ->> workload_control_loop- -
        opt create workload fails
            workload_control_loop ->> workload_control_loop ++: spawn restart
            workload_control_loop -> workload_command ++: send restart command
            workload_command - ->> workload_control_loop- -
        end
    end
end
workload_control_loop -> workload_command - -: wait for command
deactivate runtime_facade
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>