<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="570px" preserveAspectRatio="none" style="width:905px;height:570px;" version="1.1" viewBox="0 0 905 570" width="905px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="548.4531" style="stroke: #D3D3D3; stroke-width: 1.0;" width="864.5" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="392.75" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="467.7266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="74" y="80.7266"/><rect fill="#FFFFFF" height="101.3984" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="212.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="476.3203"/><rect fill="#FFFFFF" height="447.5938" style="stroke: #383838; stroke-width: 1.0;" width="10" x="424" y="101.8594"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="572.5" y="442.1875"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="766.5" y="144.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="766.5" y="366.9219"/><rect fill="#FFFFFF" height="367.4609" style="stroke: #000000; stroke-width: 2.0;" width="774.5" x="120" y="173.9922"/><rect fill="#FFFFFF" height="176.6641" style="stroke: #000000; stroke-width: 2.0;" width="754.5" x="130" y="328.6563"/><rect fill="#FFFFFF" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="548.5" x="140" y="395.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="79" x2="79" y1="70.7266" y2="558.4531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="253" x2="253" y1="70.7266" y2="558.4531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="428.5" x2="428.5" y1="70.7266" y2="558.4531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="577.5" x2="577.5" y1="70.7266" y2="558.4531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="771.5" x2="771.5" y1="70.7266" y2="558.4531"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="122" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="25" y="59.4248">RuntimeFacade</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="206" x="150" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="157" y="59.4248">WorkloadCommandChannel</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="115" x="371.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="390.5" y="43.1279">&lt;&lt;task&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="378.5" y="59.4248">Workload Task</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="162" x="496.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="503.5" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="668.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="675.5" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="699" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="467.7266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="74" y="80.7266"/><rect fill="#FFFFFF" height="101.3984" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="212.2578"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="248" y="476.3203"/><rect fill="#FFFFFF" height="447.5938" style="stroke: #383838; stroke-width: 1.0;" width="10" x="424" y="101.8594"/><rect fill="#FFFFFF" height="91.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="572.5" y="442.1875"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="766.5" y="144.9922"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="766.5" y="366.9219"/><polygon fill="#383838" points="412,97.8594,422,101.8594,412,105.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="84" x2="418" y1="101.8594" y2="101.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="91" y="96.7935">spawn create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="84" x2="94" y1="115.8594" y2="111.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="84" x2="94" y1="115.8594" y2="119.8594"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="84" x2="423" y1="115.8594" y2="115.8594"/><polygon fill="#383838" points="754.5,140.9922,764.5,144.9922,754.5,148.9922" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="434" x2="760.5" y1="144.9922" y2="144.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="441" y="139.9263">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="434" x2="444" y1="158.9922" y2="154.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="434" x2="444" y1="158.9922" y2="162.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="434" x2="770.5" y1="158.9922" y2="158.9922"/><path d="M120,173.9922 L190,173.9922 L190,180.9922 L180,190.9922 L120,190.9922 L120,173.9922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="367.4609" style="stroke: #000000; stroke-width: 2.0;" width="774.5" x="120" y="173.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="135" y="187.0591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="205" y="186.2026">[create workload fails]</text><polygon fill="#383838" points="269,208.2578,259,212.2578,269,216.2578" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="263" x2="423" y1="212.2578" y2="212.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="275" y="207.1919">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="412" y1="226.2578" y2="222.2578"/><line style="stroke: #383838; stroke-width: 1.0;" x1="422" x2="412" y1="226.2578" y2="230.2578"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="258" x2="423" y1="226.2578" y2="226.2578"/><polygon fill="#383838" points="565.5,251.3906,575.5,255.3906,565.5,259.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="434" x2="571.5" y1="255.3906" y2="255.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="441" y="250.3247">run</text><polygon fill="#383838" points="269,280.5234,259,284.5234,269,288.5234" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="263" x2="576.5" y1="284.5234" y2="284.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="275" y="279.4575">wait for command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="575.5" x2="565.5" y1="313.6563" y2="309.6563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="575.5" x2="565.5" y1="313.6563" y2="317.6563"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="253" x2="576.5" y1="313.6563" y2="313.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="260" y="308.5903">restart command</text><path d="M130,328.6563 L200,328.6563 L200,335.6563 L190,345.6563 L130,345.6563 L130,328.6563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="176.6641" style="stroke: #000000; stroke-width: 2.0;" width="754.5" x="130" y="328.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="145" y="341.7231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="215" y="340.8667">[restart_counter &lt; limit]</text><polygon fill="#383838" points="754.5,362.9219,764.5,366.9219,754.5,370.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="577.5" x2="760.5" y1="366.9219" y2="366.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="584.5" y="361.856">create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="577.5" x2="587.5" y1="380.9219" y2="376.9219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="577.5" x2="587.5" y1="380.9219" y2="384.9219"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="577.5" x2="770.5" y1="380.9219" y2="380.9219"/><path d="M140,395.9219 L210,395.9219 L210,402.9219 L200,412.9219 L140,412.9219 L140,395.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="102.3984" style="stroke: #000000; stroke-width: 2.0;" width="548.5" x="140" y="395.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="155" y="408.9888">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="225" y="408.1323">[create workload fails]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="577.5" x2="624.5" y1="429.1875" y2="429.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="624.5" x2="624.5" y1="429.1875" y2="442.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="583.5" x2="624.5" y1="442.1875" y2="442.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="583.5" x2="593.5" y1="442.1875" y2="438.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="583.5" x2="593.5" y1="442.1875" y2="446.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="589.5" y="424.1216">spawn restart</text><polygon fill="#383838" points="269,472.3203,259,476.3203,269,480.3203" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="263" x2="571.5" y1="476.3203" y2="476.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="275" y="471.2544">send restart command</text><line style="stroke: #383838; stroke-width: 1.0;" x1="570.5" x2="560.5" y1="490.3203" y2="486.3203"/><line style="stroke: #383838; stroke-width: 1.0;" x1="570.5" x2="560.5" y1="490.3203" y2="494.3203"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="253" x2="571.5" y1="490.3203" y2="490.3203"/><polygon fill="#383838" points="264,529.4531,254,533.4531,264,537.4531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="258" x2="576.5" y1="533.4531" y2="533.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="270" y="528.3872">wait for command</text><!--MD5=[f0f4d4524113b80c5f2b6c6337551565]
@startuml seq_restart_workload_on_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "RuntimeFacade" as runtime_facade
    participant "WorkloadCommandChannel" as workload_command
    participant "<<task>>\nWorkload Task" as create_workload_task
    participant "WorkloadControlLoop" as workload_control_loop
    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

activate runtime_facade
runtime_facade -> create_workload_task ++: spawn create workload
create_workload_task - ->> runtime_facade
create_workload_task -> runtime ++: create workload
runtime - ->> create_workload_task- -
opt create workload fails
    create_workload_task -> workload_command ++: send restart command
    workload_command - ->> create_workload_task
    create_workload_task -> workload_control_loop : run
    workload_control_loop -> workload_command: wait for command
    workload_command - ->> workload_control_loop - -++: restart command
    opt restart_counter < limit
        workload_control_loop -> runtime ++: create workload
        runtime - ->> workload_control_loop- -
        opt create workload fails
            workload_control_loop ->> workload_control_loop ++: spawn restart
            workload_control_loop -> workload_command ++: send restart command
            workload_command - ->> workload_control_loop- -
        end
    end
    workload_control_loop -> workload_command - -: wait for command
end
deactivate runtime_facade
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>