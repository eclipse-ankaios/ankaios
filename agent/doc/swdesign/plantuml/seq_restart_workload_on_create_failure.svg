<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="725px" preserveAspectRatio="none" style="width:767px;height:725px;background:#FFFFFF;" version="1.1" viewBox="0 0 767 725" width="767px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="706.8516" style="stroke:#D3D3D3;stroke-width:0.5;" width="734" x="11" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="324.5" y="18.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="136.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="71" y="82.7266"/><rect fill="#FFFFFF" height="107.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="76" y="111.8594"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="145.9922"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="248.2578"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="397.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="441.0547"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="608.7188"/><rect fill="#FFFFFF" height="8" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="245" y="672.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="245" y1="672.8516" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="255" y1="672.8516" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="255" y1="672.8516" y2="672.8516"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="245" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="245" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="255" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="491.7266" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="439" y="189.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="439" y1="189.125" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="189.125" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="449" y1="189.125" y2="189.125"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="439" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="439" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="134.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="444" y="277.3906"/><rect fill="#FFFFFF" height="210.6641" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="444" y="470.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="444" y1="470.1875" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="454" y1="470.1875" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="454" y1="470.1875" y2="470.1875"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="444" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="444" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="454" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="106.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="449" y="574.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="574.5859" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="459" y1="574.5859" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="459" y1="574.5859" y2="574.5859"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="449" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="459" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="306.5234"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="499.3203"/><rect fill="none" height="309.1953" style="stroke:#000000;stroke-width:1.5;" width="644" x="117" y="335.5234"/><rect fill="none" height="278.0625" style="stroke:#000000;stroke-width:1.5;" width="624" x="127" y="359.6563"/><rect fill="none" height="102.3984" style="stroke:#000000;stroke-width:1.5;" width="428" x="137" y="528.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="76" x2="76" y1="72.7266" y2="680.8516"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="76" x2="76" y1="680.8516" y2="708.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="76" x2="76" y1="708.8516" y2="718.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="250" x2="250" y1="72.7266" y2="680.8516"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="250" x2="250" y1="680.8516" y2="708.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="250" x2="250" y1="708.8516" y2="718.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="444" x2="444" y1="72.7266" y2="680.8516"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="444" x2="444" y1="680.8516" y2="708.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="444" x2="444" y1="708.8516" y2="718.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="638" x2="638" y1="72.7266" y2="680.8516"/><line style="stroke:#383838;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="638" x2="638" y1="680.8516" y2="708.8516"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="638" x2="638" y1="708.8516" y2="718.8516"/><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="15" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="22" y="61.4248">RuntimeFacade</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="147" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="154" y="61.4248">WorkloadCommandChannel</text><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="162" x="363" y="41.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="370" y="61.4248">WorkloadControlLoop</text><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="535" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="542" y="45.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="565.5" y="61.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="136.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="71" y="82.7266"/><rect fill="#FFFFFF" height="107.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="76" y="111.8594"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="145.9922"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="248.2578"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="397.9219"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="441.0547"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="245" y="608.7188"/><rect fill="#FFFFFF" height="8" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="245" y="672.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="245" y1="672.8516" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="255" y1="672.8516" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="255" y1="672.8516" y2="672.8516"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="245" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="245" x2="245" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="255" x2="255" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="491.7266" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="439" y="189.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="439" y1="189.125" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="189.125" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="449" y1="189.125" y2="189.125"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="439" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="439" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="134.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="444" y="277.3906"/><rect fill="#FFFFFF" height="210.6641" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="444" y="470.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="444" y1="470.1875" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="454" y1="470.1875" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="454" y1="470.1875" y2="470.1875"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="444" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="444" x2="444" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="454" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="106.2656" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="449" y="574.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="574.5859" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="459" y1="574.5859" y2="680.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="459" y1="574.5859" y2="574.5859"/><rect fill="#FFFFFF" height="1" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="449" y="708.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="449" x2="449" y1="708.8516" y2="709.8516"/><line style="stroke:#181818;stroke-width:1.0;" x1="459" x2="459" y1="708.8516" y2="709.8516"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="306.5234"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="633" y="499.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="128" y1="98.8594" y2="98.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="128" x2="128" y1="98.8594" y2="111.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="128" y1="111.8594" y2="111.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="97" y1="111.8594" y2="107.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="97" y1="111.8594" y2="115.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="93" y="93.7935">spawn create workload</text><polygon fill="#181818" points="233,141.9922,243,145.9922,233,149.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="239" y1="145.9922" y2="145.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="93" y="140.9263">send create</text><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="97" y1="159.9922" y2="155.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="87" x2="97" y1="159.9922" y2="163.9922"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="86" x2="249" y1="159.9922" y2="159.9922"/><polygon fill="#181818" points="427,185.125,437,189.125,427,193.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="86" x2="433" y1="189.125" y2="189.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="93" y="184.0591">run</text><polygon fill="#181818" points="266,244.2578,256,248.2578,266,252.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260" x2="438" y1="248.2578" y2="248.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="272" y="243.1919">wait for command</text><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="277.3906" y2="273.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="277.3906" y2="281.3906"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250" x2="443" y1="277.3906" y2="277.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="257" y="272.3247">receive create</text><polygon fill="#181818" points="621,302.5234,631,306.5234,621,310.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="627" y1="306.5234" y2="306.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="461" y="301.4575">create</text><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="465" y1="320.5234" y2="316.5234"/><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="465" y1="320.5234" y2="324.5234"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="454" x2="637" y1="320.5234" y2="320.5234"/><path d="M117,335.5234 L187,335.5234 L187,342.6563 L177,352.6563 L117,352.6563 L117,335.5234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="309.1953" style="stroke:#000000;stroke-width:1.5;" width="644" x="117" y="335.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="132" y="348.5903">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="202" y="347.7339">[create workload fails]</text><path d="M127,359.6563 L197,359.6563 L197,366.7891 L187,376.7891 L127,376.7891 L127,359.6563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="278.0625" style="stroke:#000000;stroke-width:1.5;" width="624" x="127" y="359.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="142" y="372.7231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="153" x="212" y="371.8667">[restart_counter &lt; limit]</text><polygon fill="#181818" points="266,393.9219,256,397.9219,266,401.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260" x2="443" y1="397.9219" y2="397.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="272" y="392.856">send restart command</text><line style="stroke:#181818;stroke-width:1.0;" x1="437" x2="427" y1="411.9219" y2="407.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="437" x2="427" y1="411.9219" y2="415.9219"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250" x2="438" y1="411.9219" y2="411.9219"/><polygon fill="#181818" points="266,437.0547,256,441.0547,266,445.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260" x2="438" y1="441.0547" y2="441.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="272" y="435.9888">wait for command</text><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="470.1875" y2="466.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="442" x2="432" y1="470.1875" y2="474.1875"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250" x2="443" y1="470.1875" y2="470.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="257" y="465.1216">restart command</text><polygon fill="#181818" points="621,495.3203,631,499.3203,621,503.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="627" y1="499.3203" y2="499.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="461" y="494.2544">create workload</text><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="465" y1="513.3203" y2="509.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="455" x2="465" y1="513.3203" y2="517.3203"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="454" x2="637" y1="513.3203" y2="513.3203"/><path d="M137,528.3203 L207,528.3203 L207,535.4531 L197,545.4531 L137,545.4531 L137,528.3203 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="102.3984" style="stroke:#000000;stroke-width:1.5;" width="428" x="137" y="528.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="25" x="152" y="541.3872">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146" x="222" y="540.5308">[create workload fails]</text><line style="stroke:#181818;stroke-width:1.0;" x1="454" x2="501" y1="561.5859" y2="561.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="501" x2="501" y1="561.5859" y2="574.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="460" x2="501" y1="574.5859" y2="574.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="460" x2="470" y1="574.5859" y2="570.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="460" x2="470" y1="574.5859" y2="578.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="466" y="556.52">spawn restart</text><polygon fill="#181818" points="266,604.7188,256,608.7188,266,612.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260" x2="448" y1="608.7188" y2="608.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="272" y="603.6528">send restart command</text><line style="stroke:#181818;stroke-width:1.0;" x1="447" x2="437" y1="622.7188" y2="618.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="447" x2="437" y1="622.7188" y2="626.7188"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="250" x2="448" y1="622.7188" y2="622.7188"/><polygon fill="#181818" points="266,668.8516,256,672.8516,266,676.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260" x2="448" y1="672.8516" y2="672.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="272" y="667.7856">wait for command</text><!--MD5=[dd947fe33b5120e7d1ae95f77d89e0c2]
@startuml seq_restart_workload_on_create_failure
!include ../../../../resources/doc/plantuml/clean.skin

box "Ankaios Agent"
    participant "RuntimeFacade" as runtime_facade
    participant "WorkloadCommandChannel" as workload_command
    participant "WorkloadControlLoop" as workload_control_loop
    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

activate runtime_facade
runtime_facade ->> runtime_facade ++: spawn create workload
runtime_facade -> workload_command ++: send create
workload_command - ->> runtime_facade- -
runtime_facade -> workload_control_loop ++- -: run
deactivate runtime_facade
workload_control_loop -> workload_command++: wait for command
workload_command - ->> workload_control_loop - -++: receive create
workload_control_loop -> runtime ++: create
runtime - ->> workload_control_loop- -
opt create workload fails
    opt restart_counter < limit
    workload_control_loop -> workload_command ++: send restart command
    workload_command - ->> workload_control_loop- -
    deactivate workload_control_loop
    workload_control_loop -> workload_command ++: wait for command
    workload_command - ->> workload_control_loop - -++: restart command
        workload_control_loop -> runtime ++: create workload
        runtime - ->> workload_control_loop- -
        opt create workload fails
            workload_control_loop ->> workload_control_loop ++: spawn restart
            workload_control_loop -> workload_command ++: send restart command
            workload_command - ->> workload_control_loop- -
        end
    end
end
workload_control_loop -> workload_command ++: wait for command
...
@enduml

@startuml seq_restart_workload_on_create_failure
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "RuntimeFacade" as runtime_facade
    participant "WorkloadCommandChannel" as workload_command
    participant "WorkloadControlLoop" as workload_control_loop
    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime
end box

activate runtime_facade
runtime_facade ->> runtime_facade ++: spawn create workload
runtime_facade -> workload_command ++: send create
workload_command - ->> runtime_facade- -
runtime_facade -> workload_control_loop ++- -: run
deactivate runtime_facade
workload_control_loop -> workload_command++: wait for command
workload_command - ->> workload_control_loop - -++: receive create
workload_control_loop -> runtime ++: create
runtime - ->> workload_control_loop- -
opt create workload fails
    opt restart_counter < limit
    workload_control_loop -> workload_command ++: send restart command
    workload_command - ->> workload_control_loop- -
    deactivate workload_control_loop
    workload_control_loop -> workload_command ++: wait for command
    workload_command - ->> workload_control_loop - -++: restart command
        workload_control_loop -> runtime ++: create workload
        runtime - ->> workload_control_loop- -
        opt create workload fails
            workload_control_loop ->> workload_control_loop ++: spawn restart
            workload_control_loop -> workload_command ++: send restart command
            workload_command - ->> workload_control_loop- -
        end
    end
end
workload_control_loop -> workload_command ++: wait for command
...
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>