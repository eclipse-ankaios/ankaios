<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="904px" preserveAspectRatio="none" style="width:1515px;height:904px;" version="1.1" viewBox="0 0 1515 904" width="1515px" zoomAndPan="magnify"><defs/><g><rect fill="#EEEEEE" height="882.3047" style="stroke: #D3D3D3; stroke-width: 1.0;" width="1463.5" x="14" y="4"/><text fill="#777777" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="692.25" y="16.0669">Ankaios Agent</text><rect fill="#FFFFFF" height="81.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="80.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="80.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="80.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="80.5" y1="80.7266" y2="80.7266"/><rect fill="#FFFFFF" height="14.8047" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="202.7969" y2="217.6016"/><rect fill="#FFFFFF" height="624.8984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="258.4063" y2="883.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="258.4063" y2="883.3047"/><rect fill="#FFFFFF" height="32.1328" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="129.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="129.8594" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="129.8594" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="261.5" y1="129.8594" y2="129.8594"/><rect fill="#FFFFFF" height="14.8047" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="202.7969" y2="217.6016"/><rect fill="#FFFFFF" height="624.8984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="258.4063" y2="883.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="258.4063" y2="883.3047"/><rect fill="#FFFFFF" height="571.6328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="256.5" y="311.6719"/><rect fill="#FFFFFF" height="505.3672" style="stroke: #383838; stroke-width: 1.0;" width="10" x="261.5" y="377.9375"/><rect fill="#FFFFFF" height="435.625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="266.5" y="447.6797"/><rect fill="#FFFFFF" height="393.4922" style="stroke: #383838; stroke-width: 1.0;" width="10" x="271.5" y="489.8125"/><rect fill="#FFFFFF" height="237.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="276.5" y="645.5078"/><rect fill="#FFFFFF" height="84.4297" style="stroke: #383838; stroke-width: 1.0;" width="10" x="492.5" y="523.9453"/><rect fill="#FFFFFF" height="330.2266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="809" y="553.0781"/><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="977.5" y="737.9063"/><rect fill="#FFFFFF" height="86.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1171.5" y="767.0391"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1365.5" y="810.1719"/><rect fill="#FFFFFF" height="730.4453" style="stroke: #000000; stroke-width: 2.0;" width="1343" x="160.5" y="144.8594"/><rect fill="#FFFFFF" height="672.5078" style="stroke: none; stroke-width: 1.0;" width="1343" x="160.5" y="202.7969"/><rect fill="#FFFFFF" height="602.8984" style="stroke: #000000; stroke-width: 2.0;" width="1323" x="170.5" y="265.4063"/><rect fill="#FFFFFF" height="529.6328" style="stroke: #000000; stroke-width: 2.0;" width="1303" x="180.5" y="331.6719"/><rect fill="#FFFFFF" height="470.3672" style="stroke: none; stroke-width: 1.0;" width="1303" x="180.5" y="390.9375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="75" x2="75" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="75" x2="75" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="75" x2="75" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="75" x2="75" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="75" x2="75" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="75" x2="75" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="75" x2="75" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="256.5" x2="256.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="256.5" x2="256.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="256.5" x2="256.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="256.5" x2="256.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="256.5" x2="256.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="256.5" x2="256.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="256.5" x2="256.5" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="497.5" x2="497.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="497.5" x2="497.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="497.5" x2="497.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="497.5" x2="497.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="497.5" x2="497.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="497.5" x2="497.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="497.5" x2="497.5" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="709.5" x2="709.5" y1="591.7266" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="813.5" x2="813.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="813.5" x2="813.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="813.5" x2="813.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="813.5" x2="813.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="813.5" x2="813.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="813.5" x2="813.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="813.5" x2="813.5" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="982.5" x2="982.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="982.5" x2="982.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="982.5" x2="982.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="982.5" x2="982.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="982.5" x2="982.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="982.5" x2="982.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="982.5" x2="982.5" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1176.5" x2="1176.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1176.5" x2="1176.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1176.5" x2="1176.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1176.5" x2="1176.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1176.5" x2="1176.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1176.5" x2="1176.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1176.5" x2="1176.5" y1="258.4063" y2="892.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1370.5" x2="1370.5" y1="70.7266" y2="80.7266"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1370.5" x2="1370.5" y1="80.7266" y2="108.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1370.5" x2="1370.5" y1="108.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1370.5" x2="1370.5" y1="161.9922" y2="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1370.5" x2="1370.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1370.5" x2="1370.5" y1="217.6016" y2="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1370.5" x2="1370.5" y1="258.4063" y2="892.3047"/><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="115" x="18" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="25" y="59.4248">AgentManager</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="132" x="190.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="118" x="197.5" y="59.4248">RuntimeManager</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="122" x="436.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="108" x="443.5" y="59.4248">RuntimeFacade</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="111" x="758.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="77" x="775.5" y="43.1279">&lt;&lt;task&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="765.5" y="59.4248">WorkloadTask</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="206" x="879.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="886.5" y="59.4248">WorkloadCommandChannel</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="162" x="1095.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="148" x="1102.5" y="59.4248">WorkloadControlLoop</text><rect fill="#F8F8F8" height="46.5938" style="stroke: #383838; stroke-width: 1.5;" width="206" x="1267.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="192" x="1274.5" y="43.1279">Specific Runtime Connector</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149" x="1298" y="59.4248">e.g., PodmanRuntime</text><rect fill="#FFFFFF" height="81.2656" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="80.7266"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="80.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="80.7266" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="80.5" y1="80.7266" y2="80.7266"/><rect fill="#FFFFFF" height="14.8047" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="202.7969" y2="217.6016"/><rect fill="#FFFFFF" height="624.8984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="70.5" y="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="70.5" x2="70.5" y1="258.4063" y2="883.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="80.5" y1="258.4063" y2="883.3047"/><rect fill="#FFFFFF" height="32.1328" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="129.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="129.8594" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="129.8594" y2="161.9922"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="261.5" y1="129.8594" y2="129.8594"/><rect fill="#FFFFFF" height="14.8047" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="202.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="202.7969" y2="217.6016"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="202.7969" y2="217.6016"/><rect fill="#FFFFFF" height="624.8984" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="251.5" y="258.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="251.5" x2="251.5" y1="258.4063" y2="883.3047"/><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="261.5" y1="258.4063" y2="883.3047"/><rect fill="#FFFFFF" height="571.6328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="256.5" y="311.6719"/><rect fill="#FFFFFF" height="505.3672" style="stroke: #383838; stroke-width: 1.0;" width="10" x="261.5" y="377.9375"/><rect fill="#FFFFFF" height="435.625" style="stroke: #383838; stroke-width: 1.0;" width="10" x="266.5" y="447.6797"/><rect fill="#FFFFFF" height="393.4922" style="stroke: #383838; stroke-width: 1.0;" width="10" x="271.5" y="489.8125"/><rect fill="#FFFFFF" height="237.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="276.5" y="645.5078"/><rect fill="#FFFFFF" height="84.4297" style="stroke: #383838; stroke-width: 1.0;" width="10" x="492.5" y="523.9453"/><rect fill="#FFFFFF" height="330.2266" style="stroke: #383838; stroke-width: 1.0;" width="10" x="809" y="553.0781"/><rect fill="#FFFFFF" height="43.1328" style="stroke: #383838; stroke-width: 1.0;" width="10" x="977.5" y="737.9063"/><rect fill="#FFFFFF" height="86.2656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1171.5" y="767.0391"/><rect fill="#FFFFFF" height="14" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1365.5" y="810.1719"/><polygon fill="#383838" points="239.5,125.8594,249.5,129.8594,239.5,133.8594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="80.5" x2="245.5" y1="129.8594" y2="129.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="87.5" y="124.7935">handle update workload</text><path d="M160.5,144.8594 L224.5,144.8594 L224.5,151.8594 L214.5,161.8594 L160.5,161.8594 L160.5,144.8594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="730.4453" style="stroke: #000000; stroke-width: 2.0;" width="1343" x="160.5" y="144.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="175.5" y="157.9263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="380" x="239.5" y="157.0698">[first update workload call for the current agent execution]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="194" x="626" y="186.2026">see dedicated digram for first call</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="160.5" x2="1503.5" y1="203.7969" y2="203.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="224" x="165.5" y="214.0073">[subsequent update workload call]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="146" x="650" y="241.812">handle deleted Workloads</text><path d="M170.5,265.4063 L247.5,265.4063 L247.5,272.4063 L237.5,282.4063 L170.5,282.4063 L170.5,265.4063 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="602.8984" style="stroke: #000000; stroke-width: 2.0;" width="1323" x="170.5" y="265.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="185.5" y="278.4731">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="165" x="262.5" y="277.6167">[for each added Worload]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="261.5" x2="308.5" y1="298.6719" y2="298.6719"/><line style="stroke: #383838; stroke-width: 1.0;" x1="308.5" x2="308.5" y1="298.6719" y2="311.6719"/><line style="stroke: #383838; stroke-width: 1.0;" x1="267.5" x2="308.5" y1="311.6719" y2="311.6719"/><polygon fill="#383838" points="277.5,307.6719,267.5,311.6719,277.5,315.6719" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="273.5" y="293.606">find workload in running workloads</text><path d="M180.5,331.6719 L244.5,331.6719 L244.5,338.6719 L234.5,348.6719 L180.5,348.6719 L180.5,331.6719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="529.6328" style="stroke: #000000; stroke-width: 2.0;" width="1303" x="180.5" y="331.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="195.5" y="344.7388">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="461" x="259.5" y="343.8823">[found a workload with the same name in the list of running workloads]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="266.5" x2="313.5" y1="364.9375" y2="364.9375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="313.5" x2="313.5" y1="364.9375" y2="377.9375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="272.5" x2="313.5" y1="377.9375" y2="377.9375"/><polygon fill="#383838" points="282.5,373.9375,272.5,377.9375,282.5,381.9375" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="278.5" y="359.8716">update_workload</text><path d="M398,357.3047 L398,382.3047 L671,382.3047 L671,367.3047 L661,357.3047 L398,357.3047 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><path d="M661,357.3047 L661,367.3047 L671,367.3047 L661,357.3047 " fill="#FFFFFF" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="404" y="374.3716">see delete digram for details on update</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="180.5" x2="1483.5" y1="391.9375" y2="391.9375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="339" x="185.5" y="402.1479">[no such workload found in list of running workloads</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="189.5" y="414.9526">normal behaviour]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="271.5" x2="318.5" y1="434.6797" y2="434.6797"/><line style="stroke: #383838; stroke-width: 1.0;" x1="318.5" x2="318.5" y1="434.6797" y2="447.6797"/><line style="stroke: #383838; stroke-width: 1.0;" x1="277.5" x2="318.5" y1="447.6797" y2="447.6797"/><polygon fill="#383838" points="287.5,443.6797,277.5,447.6797,287.5,451.6797" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="283.5" y="429.6138">add workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="276.5" x2="323.5" y1="476.8125" y2="476.8125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="323.5" x2="323.5" y1="476.8125" y2="489.8125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="282.5" x2="323.5" y1="489.8125" y2="489.8125"/><polygon fill="#383838" points="292.5,485.8125,282.5,489.8125,292.5,493.8125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="288.5" y="471.7466">create control interface</text><polygon fill="#383838" points="480.5,519.9453,490.5,523.9453,480.5,527.9453" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="281.5" x2="486.5" y1="523.9453" y2="523.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="288.5" y="518.8794">request create workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="807" x2="797" y1="553.0781" y2="549.0781"/><line style="stroke: #383838; stroke-width: 1.0;" x1="807" x2="797" y1="553.0781" y2="557.0781"/><line style="stroke: #383838; stroke-width: 1.0;" x1="502.5" x2="808" y1="553.0781" y2="553.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="509.5" y="548.0122">spawn create workload</text><polygon fill="#383838" points="658.5,578.2109,668.5,582.2109,658.5,586.2109" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="502.5" x2="664.5" y1="582.2109" y2="582.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="509.5" y="577.145">create WorkloadObject</text><rect fill="#F8F8F8" height="30.2969" style="stroke: #383838; stroke-width: 1.5;" width="78" x="670.5" y="561.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="677.5" y="581.0732">Workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="281.5" x2="291.5" y1="608.375" y2="604.375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="281.5" x2="291.5" y1="608.375" y2="612.375"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="281.5" x2="496.5" y1="608.375" y2="608.375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="281.5" x2="328.5" y1="632.5078" y2="632.5078"/><line style="stroke: #383838; stroke-width: 1.0;" x1="328.5" x2="328.5" y1="632.5078" y2="645.5078"/><line style="stroke: #383838; stroke-width: 1.0;" x1="287.5" x2="328.5" y1="645.5078" y2="645.5078"/><polygon fill="#383838" points="297.5,641.5078,287.5,645.5078,297.5,649.5078" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="293.5" y="627.4419">store new workload</text><polygon fill="#383838" points="1164.5,675.6406,1174.5,679.6406,1164.5,683.6406" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="819" x2="1170.5" y1="679.6406" y2="679.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="826" y="674.5747">run</text><polygon fill="#383838" points="993.5,704.7734,983.5,708.7734,993.5,712.7734" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="987.5" x2="1175.5" y1="708.7734" y2="708.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="999.5" y="703.7075">wait for command</text><polygon fill="#383838" points="965.5,733.9063,975.5,737.9063,965.5,741.9063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="819" x2="971.5" y1="737.9063" y2="737.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="826" y="732.8403">send create</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1169.5" x2="1159.5" y1="767.0391" y2="763.0391"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1169.5" x2="1159.5" y1="767.0391" y2="771.0391"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="987.5" x2="1170.5" y1="767.0391" y2="767.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="994.5" y="761.9731">receive create</text><line style="stroke: #383838; stroke-width: 1.0;" x1="819" x2="829" y1="781.0391" y2="777.0391"/><line style="stroke: #383838; stroke-width: 1.0;" x1="819" x2="829" y1="781.0391" y2="785.0391"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="819" x2="981.5" y1="781.0391" y2="781.0391"/><polygon fill="#383838" points="1353.5,806.1719,1363.5,810.1719,1353.5,814.1719" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1181.5" x2="1359.5" y1="810.1719" y2="810.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="1188.5" y="805.106">create runtime workload</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1181.5" x2="1191.5" y1="824.1719" y2="820.1719"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1181.5" x2="1191.5" y1="824.1719" y2="828.1719"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1181.5" x2="1369.5" y1="824.1719" y2="824.1719"/><polygon fill="#383838" points="993.5,849.3047,983.5,853.3047,993.5,857.3047" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="987.5" x2="1175.5" y1="853.3047" y2="853.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="999.5" y="848.2388">wait for command</text><!--MD5=[a4b4cae102e8c61d58943c67c92ca102]
@startuml seq_update_workload_subsequent_added
skinparam monochrome true
skinparam guillemet true
skinparam style strictuml
hide empty members
hide empty methods

skinparam class {
    BorderColor<<logical entity>> grey
    FontColor<<logical entity>> grey
    StereotypeFontColor<<logical entity>> grey
}

skinparam sequenceBox {
    BorderColor #LightGrey
    BackgroundColor #EEEEEE
    FontColor #777777
}

skinparam BoxPadding 10

skinparam note {
    BackgroundColor #FFFFFF
}

skinparam nodesep 30
skinparam ranksep 30

box "Ankaios Agent"
    participant "AgentManager" as manager

    participant "RuntimeManager" as runtime_manager
    participant "RuntimeFacade" as rt_facade

    participant "Workload" as workload
    participant "<<task>>\nWorkloadTask" as create_workload_task
    participant "WorkloadCommandChannel" as workload_command
    participant "WorkloadControlLoop" as workload_control_loop

    participant "Specific Runtime Connector\n e.g., PodmanRuntime" as runtime

end box

activate manager

...

manager -> runtime_manager ++: handle update workload

alt first update workload call for the current agent execution
    ... see dedicated digram for first call ...
else subsequent update workload call
    ... handle deleted Workloads ...

    loop for each added Worload
        runtime_manager -> runtime_manager ++- -: find workload in running workloads
        alt found a workload with the same name in the list of running workloads
            runtime_manager -> runtime_manager ++- -: update_workload
            note right
                see delete digram for details on update
            endnote
        else no such workload found in list of running workloads \n normal behaviour
            runtime_manager -> runtime_manager++: add workload
            runtime_manager -> runtime_manager++- -: create control interface
            runtime_manager -> rt_facade++: request create workload
            rt_facade ->> create_workload_task ++: spawn create workload
            rt_facade -> workload **: create WorkloadObject
            rt_facade - ->> runtime_manager- -
            runtime_manager -> runtime_manager++- -: store new workload
            create_workload_task -> workload_control_loop : run
            workload_control_loop -> workload_command: wait for command
            create_workload_task -> workload_command ++: send create
            workload_command - ->> workload_control_loop ++: receive create
            workload_command - ->> create_workload_task- -
            workload_control_loop -> runtime++: create runtime workload
            runtime - ->> workload_control_loop- -
            workload_control_loop -> workload_command - -: wait for command
            deactivate runtime
        end
    end
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.9+9-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>