workloads:
  workload_with_mounted_text_file:
    agent: agent_A
    runtime: podman
    configs:
      nginx_conf: file_data
    files:
      - mountPoint: "/etc/nginx/nginx.conf"
        data: "{{nginx_conf.web_server_config}}"
    runtimeConfig: |
      image: ghcr.io/eclipse-ankaios/tests/nginx:alpine-slim
      commandOptions: [ "-p", "8080:80" ]
  workload_with_mounted_binary_file:
    agent: agent_A
    runtime: podman
    configs:
      file_data: file_data
    files:
      - mountPoint: "/hello"
        binaryData: "{{file_data.bin_data}}"
    runtimeConfig: |
      image: ghcr.io/eclipse-ankaios/tests/alpine:latest
      commandOptions: [ "--entrypoint", "/bin/sh" ]
      commandArgs: [ "-c", "/hello" ]
configs:
  file_data:
    web_server_config: |
      worker_processes  1;

      events {
          worker_connections  1024;
      }

      http {
          server {
              listen 80;
              server_name custom_nginx;

              location /custom {
                  default_type text/plain;
                  return 200 "The mounted custom nginx.conf is being used!\n";
              }
          }
      }
    # base64 encoded /bin/sh file with content: echo "binary file executed!"
    bin_data: IyEvYmluL3NoCgplY2hvICJiaW5hcnkgZmlsZSBleGVjdXRlZCEi
