apiVersion: v1
workloads:
  simple:
    agent: agent_A
    runtime: podman-kube
    controlInterfaceAccess:
      allowRules:
      - type: StateRule
        operation: Read
        filterMasks:
        - "desiredState"
    runtimeConfig: |
      controlInterfaceTarget: pod_A-pod/container_A
      manifest: |
        apiVersion: v1
        kind: Deployment
        metadata:
          name: pod_A
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: alpine
          restartPolicy: Never
          template:
            metadata:
              labels:
                app: alpine
            spec:
              containers:
              - name: container_A
                image: docker.io/alpine:latest
                command: ["sleep", "12000"]
              - name: container_A_sidecar
                image: docker.io/alpine:latest
                command: ["sleep", "12000"]
        ---
        apiVersion: v1
        kind: Pod
        metadata:
          name: pod_B
        spec:
          containers:
          - name: container_B
            image: docker.io/alpine:latest
            command: ["sleep", "12000"]
