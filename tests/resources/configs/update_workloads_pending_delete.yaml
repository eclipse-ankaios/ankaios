apiVersion: v1
workloads:
  frontend:
    runtime: podman
    agent: agent_A
    restartPolicy: NEVER
    dependencies:
      backend: ADD_COND_RUNNING
    tags:
      owner: Ankaios team
    runtimeConfig: |
      image: ghcr.io/eclipse-ankaios/tests/nginx:alpine-slim
      commandOptions: ["-p", "8083:80"]
  backend:
    runtime: podman
    agent: agent_A
    restartPolicy: NEVER
    dependencies:
      init_backend: ADD_COND_SUCCEEDED
    tags:
      owner: Ankaios team
    runtimeConfig: |
      image: ghcr.io/eclipse-ankaios/tests/nginx:alpine-slim
      commandOptions: ["-p", "8082:80"]
  init_backend:
    runtime: podman
    agent: agent_A
    restartPolicy: NEVER
    tags:
      owner: Ankaios team
    runtimeConfig: |
      image: ghcr.io/eclipse-ankaios/tests/alpine:latest
      commandArgs: ["echo", "init_backend"]
